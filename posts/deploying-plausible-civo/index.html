<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>🚀 Deploying Plausible to Civo Kubernetes 🌍 | Keith Hubner</title>
<meta name=keywords content="Civo,Kubernetes"><meta name=description content="🎯 Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!
In this guide, we&rsquo;ll walk through deploying Plausible Analytics—a lightweight, open-source, privacy-friendly web analytics tool—on a Civo Kubernetes cluster. By the end, you&rsquo;ll have a fully functional Plausible instance running securely with 🔒 Let&rsquo;s Encrypt SSL, 🐘 PostgreSQL, and 📊 ClickHouse.

📌 Prerequisites 🛠️
Before we begin, ensure you have the following set up:
✅ Civo Account: Sign up for Civo and ensure you have Kubernetes access.
✅ Civo CLI: Install the Civo CLI and configure it.
✅ kubectl: Install Kubernetes CLI for cluster management.
✅ Helm: Install Helm to deploy packages on Kubernetes.
✅ 🌐 Domain Name: A domain for hosting Plausible.
✅ ✉️ Email Address: Required for Let&rsquo;s Encrypt SSL certificates."><meta name=author content="Keith Hubner"><link rel=canonical href=https://keithhubner.github.io/keithhubner.com/posts/deploying-plausible-civo/><link crossorigin=anonymous href=/keithhubner.com/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://keithhubner.github.io/keithhubner.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keithhubner.github.io/keithhubner.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keithhubner.github.io/keithhubner.com/favicon-32x32.png><link rel=apple-touch-icon href=https://keithhubner.github.io/keithhubner.com/apple-touch-icon.png><link rel=mask-icon href=https://keithhubner.github.io/keithhubner.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://keithhubner.github.io/keithhubner.com/posts/deploying-plausible-civo/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://keithhubner.github.io/keithhubner.com/posts/deploying-plausible-civo/"><meta property="og:site_name" content="Keith Hubner"><meta property="og:title" content="🚀 Deploying Plausible to Civo Kubernetes 🌍"><meta property="og:description" content="🎯 Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!
In this guide, we’ll walk through deploying Plausible Analytics—a lightweight, open-source, privacy-friendly web analytics tool—on a Civo Kubernetes cluster. By the end, you’ll have a fully functional Plausible instance running securely with 🔒 Let’s Encrypt SSL, 🐘 PostgreSQL, and 📊 ClickHouse.
📌 Prerequisites 🛠️ Before we begin, ensure you have the following set up:
✅ Civo Account: Sign up for Civo and ensure you have Kubernetes access.
✅ Civo CLI: Install the Civo CLI and configure it.
✅ kubectl: Install Kubernetes CLI for cluster management.
✅ Helm: Install Helm to deploy packages on Kubernetes.
✅ 🌐 Domain Name: A domain for hosting Plausible.
✅ ✉️ Email Address: Required for Let’s Encrypt SSL certificates."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-22T00:00:00+00:00"><meta property="article:tag" content="Civo"><meta property="article:tag" content="Kubernetes"><meta name=twitter:card content="summary"><meta name=twitter:title content="🚀 Deploying Plausible to Civo Kubernetes 🌍"><meta name=twitter:description content="🎯 Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!
In this guide, we&rsquo;ll walk through deploying Plausible Analytics—a lightweight, open-source, privacy-friendly web analytics tool—on a Civo Kubernetes cluster. By the end, you&rsquo;ll have a fully functional Plausible instance running securely with 🔒 Let&rsquo;s Encrypt SSL, 🐘 PostgreSQL, and 📊 ClickHouse.

📌 Prerequisites 🛠️
Before we begin, ensure you have the following set up:
✅ Civo Account: Sign up for Civo and ensure you have Kubernetes access.
✅ Civo CLI: Install the Civo CLI and configure it.
✅ kubectl: Install Kubernetes CLI for cluster management.
✅ Helm: Install Helm to deploy packages on Kubernetes.
✅ 🌐 Domain Name: A domain for hosting Plausible.
✅ ✉️ Email Address: Required for Let&rsquo;s Encrypt SSL certificates."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"All Posts","item":"https://keithhubner.github.io/keithhubner.com/posts/"},{"@type":"ListItem","position":2,"name":"🚀 Deploying Plausible to Civo Kubernetes 🌍","item":"https://keithhubner.github.io/keithhubner.com/posts/deploying-plausible-civo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"🚀 Deploying Plausible to Civo Kubernetes 🌍","name":"🚀 Deploying Plausible to Civo Kubernetes 🌍","description":"🎯 Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!\nIn this guide, we\u0026rsquo;ll walk through deploying Plausible Analytics—a lightweight, open-source, privacy-friendly web analytics tool—on a Civo Kubernetes cluster. By the end, you\u0026rsquo;ll have a fully functional Plausible instance running securely with 🔒 Let\u0026rsquo;s Encrypt SSL, 🐘 PostgreSQL, and 📊 ClickHouse.\n📌 Prerequisites 🛠️ Before we begin, ensure you have the following set up:\n✅ Civo Account: Sign up for Civo and ensure you have Kubernetes access.\n✅ Civo CLI: Install the Civo CLI and configure it.\n✅ kubectl: Install Kubernetes CLI for cluster management.\n✅ Helm: Install Helm to deploy packages on Kubernetes.\n✅ 🌐 Domain Name: A domain for hosting Plausible.\n✅ ✉️ Email Address: Required for Let\u0026rsquo;s Encrypt SSL certificates.\n","keywords":["Civo","Kubernetes"],"articleBody":"🎯 Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!\nIn this guide, we’ll walk through deploying Plausible Analytics—a lightweight, open-source, privacy-friendly web analytics tool—on a Civo Kubernetes cluster. By the end, you’ll have a fully functional Plausible instance running securely with 🔒 Let’s Encrypt SSL, 🐘 PostgreSQL, and 📊 ClickHouse.\n📌 Prerequisites 🛠️ Before we begin, ensure you have the following set up:\n✅ Civo Account: Sign up for Civo and ensure you have Kubernetes access.\n✅ Civo CLI: Install the Civo CLI and configure it.\n✅ kubectl: Install Kubernetes CLI for cluster management.\n✅ Helm: Install Helm to deploy packages on Kubernetes.\n✅ 🌐 Domain Name: A domain for hosting Plausible.\n✅ ✉️ Email Address: Required for Let’s Encrypt SSL certificates.\n🚀 Step 1: Create Your Civo Kubernetes Cluster 🌟 To create a cluster, run the following command:\ncivo k8s create plausible-cluster --nodes=3 --size=g4s.kube.medium --wait --save --merge 🔹 Explanation:\n--nodes=3: Creates a 3-node cluster. --size=g4s.kube.medium: Specifies node size. --wait --save --merge: Waits for deployment, saves config, and merges it with kubectl. Once the cluster is ready, verify:\nkubectl get nodes 🏗️ Step 2: Set Up a Namespace 🎯 Namespaces help organize resources. Let’s create one for Plausible:\nkubectl create namespace plausible Verify:\nkubectl get namespaces 🔒 Step 3: Set Up Secrets and ConfigMap 🔐 Securely Store Database Credentials apiVersion: v1 kind: Secret metadata: name: plausible-config namespace: plausible type: Opaque stringData: POSTGRES_USER: plausible POSTGRES_PASSWORD: secure-random-password POSTGRES_DB: plausible_db kubectl apply -f plausible-secrets.yaml 📝 Configure Plausible Settings apiVersion: v1 kind: ConfigMap metadata: name: plausible-configmap namespace: plausible data: BASE_URL: \"https://YOUR_DOMAIN\" SECRET_KEY_BASE: \"GENERATED_KEY\" CLICKHOUSE_DATABASE_URL: \"http://plausible-clickhouse:8123/plausible_events_db\" kubectl apply -f plausible-configmap.yaml 🏅 Step 4: Configure Let’s Encrypt Issuers apiVersion: cert-manager.io/v1 kind: ClusterIssuer metadata: name: letsencrypt-staging spec: acme: email: your-email@example.com server: https://acme-staging-v02.api.letsencrypt.org/directory privateKeySecretRef: name: letsencrypt-staging-key solvers: - http01: ingress: class: traefik --- apiVersion: cert-manager.io/v1 kind: ClusterIssuer metadata: name: letsencrypt-production spec: acme: email: your-email@example.com server: https://acme-v02.api.letsencrypt.org/directory privateKeySecretRef: name: letsencrypt-production-key solvers: - http01: ingress: class: traefik kubectl apply -f issuer.yaml 🌍 Step 5: Deploy Ingress for External Access apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: plausible-ingress namespace: plausible annotations: cert-manager.io/cluster-issuer: letsencrypt-staging traefik.ingress.kubernetes.io/redirect-entry-point: https spec: rules: - host: YOUR_DOMAIN http: paths: - path: / pathType: Prefix backend: service: name: plausible port: number: 80 tls: - hosts: - YOUR_DOMAIN secretName: plausible-tls kubectl apply -f plausible-ingress.yaml 🔹 After confirming DNS setup, switch to production issuer:\nkubectl patch ingress plausible-ingress -n plausible --type='json' -p='[{\"op\": \"replace\", \"path\": \"/metadata/annotations/cert-manager.io~1cluster-issuer\", \"value\": \"letsencrypt-production\"}]' 🛠️ Step 6: Deploy PostgreSQL, ClickHouse, and Plausible 🐘 Deploy PostgreSQL apiVersion: apps/v1 kind: Deployment metadata: name: plausible-postgresql namespace: plausible spec: replicas: 1 template: spec: containers: - name: postgresql image: postgres:14 envFrom: - secretRef: name: plausible-config kubectl apply -f postgres-deployment.yaml 📊 Deploy ClickHouse apiVersion: apps/v1 kind: Deployment metadata: name: plausible-clickhouse namespace: plausible spec: replicas: 1 template: spec: containers: - name: clickhouse image: clickhouse/clickhouse-server:24.3.3.102-alpine kubectl apply -f clickhouse-deployment.yaml 📈 Deploy Plausible apiVersion: apps/v1 kind: Deployment metadata: name: plausible namespace: plausible spec: replicas: 1 template: spec: containers: - name: plausible image: ghcr.io/plausible/community-edition:v2.1.4 envFrom: - secretRef: name: plausible-config kubectl apply -f plausible-deployment.yaml 🎉 Done! Your Plausible Analytics instance is now live on Civo Kubernetes! 🚀\n","wordCount":"510","inLanguage":"en","datePublished":"2025-01-22T00:00:00Z","dateModified":"2025-01-22T00:00:00Z","author":{"@type":"Person","name":"Keith Hubner"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://keithhubner.github.io/keithhubner.com/posts/deploying-plausible-civo/"},"publisher":{"@type":"Organization","name":"Keith Hubner","logo":{"@type":"ImageObject","url":"https://keithhubner.github.io/keithhubner.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keithhubner.github.io/keithhubner.com/ accesskey=h title="Keith Hubner (Alt + H)">Keith Hubner</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keithhubner.github.io/keithhubner.com/ title=Home><span>Home</span></a></li><li><a href=https://keithhubner.github.io/keithhubner.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://keithhubner.github.io/keithhubner.com/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://keithhubner.github.io/keithhubner.com/contact/ title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">🚀 Deploying Plausible to Civo Kubernetes 🌍</h1><div class=post-meta><span title='2025-01-22 00:00:00 +0000 UTC'>January 22, 2025</span>&nbsp;·&nbsp;Keith Hubner</div></header><div class=post-content><p>🎯 <strong>Welcome to the Ultimate Guide on Deploying Plausible to Civo Kubernetes!</strong></p><p>In this guide, we&rsquo;ll walk through deploying <strong>Plausible Analytics</strong>—a lightweight, open-source, privacy-friendly web analytics tool—on a <strong>Civo Kubernetes</strong> cluster. By the end, you&rsquo;ll have a fully functional Plausible instance running securely with <strong>🔒 Let&rsquo;s Encrypt SSL</strong>, <strong>🐘 PostgreSQL</strong>, and <strong>📊 ClickHouse</strong>.</p><hr><h2 id=-prerequisites->📌 Prerequisites 🛠️<a hidden class=anchor aria-hidden=true href=#-prerequisites->#</a></h2><p>Before we begin, ensure you have the following set up:</p><p>✅ <strong>Civo Account</strong>: <a href=https://www.civo.com/signup>Sign up for Civo</a> and ensure you have Kubernetes access.<br>✅ <strong>Civo CLI</strong>: <a href=https://www.civo.com/docs/cli>Install the Civo CLI</a> and configure it.<br>✅ <strong>kubectl</strong>: <a href=https://kubernetes.io/docs/tasks/tools/>Install Kubernetes CLI</a> for cluster management.<br>✅ <strong>Helm</strong>: <a href=https://helm.sh/docs/intro/install/>Install Helm</a> to deploy packages on Kubernetes.<br>✅ <strong>🌐 Domain Name</strong>: A domain for hosting Plausible.<br>✅ <strong>✉️ Email Address</strong>: Required for Let&rsquo;s Encrypt SSL certificates.</p><hr><h2 id=-step-1-create-your-civo-kubernetes-cluster->🚀 Step 1: Create Your Civo Kubernetes Cluster 🌟<a hidden class=anchor aria-hidden=true href=#-step-1-create-your-civo-kubernetes-cluster->#</a></h2><p>To create a cluster, run the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>civo k8s create plausible-cluster --nodes<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> --size<span style=color:#f92672>=</span>g4s.kube.medium --wait --save --merge
</span></span></code></pre></div><p>🔹 <strong>Explanation:</strong></p><ul><li><code>--nodes=3</code>: Creates a 3-node cluster.</li><li><code>--size=g4s.kube.medium</code>: Specifies node size.</li><li><code>--wait --save --merge</code>: Waits for deployment, saves config, and merges it with <code>kubectl</code>.</li></ul><p>Once the cluster is ready, verify:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get nodes
</span></span></code></pre></div><hr><h2 id=-step-2-set-up-a-namespace->🏗️ Step 2: Set Up a Namespace 🎯<a hidden class=anchor aria-hidden=true href=#-step-2-set-up-a-namespace->#</a></h2><p>Namespaces help organize resources. Let&rsquo;s create one for <strong>Plausible</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create namespace plausible
</span></span></code></pre></div><p>Verify:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get namespaces
</span></span></code></pre></div><hr><h2 id=-step-3-set-up-secrets-and-configmap>🔒 Step 3: Set Up Secrets and ConfigMap<a hidden class=anchor aria-hidden=true href=#-step-3-set-up-secrets-and-configmap>#</a></h2><h3 id=-securely-store-database-credentials>🔐 Securely Store Database Credentials<a hidden class=anchor aria-hidden=true href=#-securely-store-database-credentials>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-config</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>Opaque</span>
</span></span><span style=display:flex><span><span style=color:#f92672>stringData</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>POSTGRES_USER</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>POSTGRES_PASSWORD</span>: <span style=color:#ae81ff>secure-random-password</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>POSTGRES_DB</span>: <span style=color:#ae81ff>plausible_db</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f plausible-secrets.yaml
</span></span></code></pre></div><h3 id=-configure-plausible-settings>📝 Configure Plausible Settings<a hidden class=anchor aria-hidden=true href=#-configure-plausible-settings>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ConfigMap</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-configmap</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>BASE_URL</span>: <span style=color:#e6db74>&#34;https://YOUR_DOMAIN&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>SECRET_KEY_BASE</span>: <span style=color:#e6db74>&#34;GENERATED_KEY&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>CLICKHOUSE_DATABASE_URL</span>: <span style=color:#e6db74>&#34;http://plausible-clickhouse:8123/plausible_events_db&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f plausible-configmap.yaml
</span></span></code></pre></div><hr><h2 id=-step-4-configure-lets-encrypt-issuers>🏅 Step 4: Configure Let&rsquo;s Encrypt Issuers<a hidden class=anchor aria-hidden=true href=#-step-4-configure-lets-encrypt-issuers>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>cert-manager.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterIssuer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>letsencrypt-staging</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>acme</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>email</span>: <span style=color:#ae81ff>your-email@example.com</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://acme-staging-v02.api.letsencrypt.org/directory</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>privateKeySecretRef</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>letsencrypt-staging-key</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>solvers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>http01</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>ingress</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>class</span>: <span style=color:#ae81ff>traefik</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>cert-manager.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterIssuer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>letsencrypt-production</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>acme</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>email</span>: <span style=color:#ae81ff>your-email@example.com</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://acme-v02.api.letsencrypt.org/directory</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>privateKeySecretRef</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>letsencrypt-production-key</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>solvers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>http01</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>ingress</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>class</span>: <span style=color:#ae81ff>traefik</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f issuer.yaml
</span></span></code></pre></div><hr><h2 id=-step-5-deploy-ingress-for-external-access>🌍 Step 5: Deploy Ingress for External Access<a hidden class=anchor aria-hidden=true href=#-step-5-deploy-ingress-for-external-access>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-ingress</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>cert-manager.io/cluster-issuer</span>: <span style=color:#ae81ff>letsencrypt-staging</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>traefik.ingress.kubernetes.io/redirect-entry-point</span>: <span style=color:#ae81ff>https</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>YOUR_DOMAIN</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Prefix</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>number</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tls</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>hosts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>YOUR_DOMAIN</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>secretName</span>: <span style=color:#ae81ff>plausible-tls</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f plausible-ingress.yaml
</span></span></code></pre></div><p>🔹 <strong>After confirming DNS setup, switch to production issuer:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl patch ingress plausible-ingress -n plausible --type<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;json&#39;</span> -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/metadata/annotations/cert-manager.io~1cluster-issuer&#34;, &#34;value&#34;: &#34;letsencrypt-production&#34;}]&#39;</span>
</span></span></code></pre></div><hr><h2 id=-step-6-deploy-postgresql-clickhouse-and-plausible>🛠️ Step 6: Deploy PostgreSQL, ClickHouse, and Plausible<a hidden class=anchor aria-hidden=true href=#-step-6-deploy-postgresql-clickhouse-and-plausible>#</a></h2><h3 id=-deploy-postgresql>🐘 Deploy PostgreSQL<a hidden class=anchor aria-hidden=true href=#-deploy-postgresql>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-postgresql</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>postgresql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>postgres:14</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>envFrom</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>secretRef</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-config</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f postgres-deployment.yaml
</span></span></code></pre></div><h3 id=-deploy-clickhouse>📊 Deploy ClickHouse<a hidden class=anchor aria-hidden=true href=#-deploy-clickhouse>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-clickhouse</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>clickhouse</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>clickhouse/clickhouse-server:24.3.3.102-alpine</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f clickhouse-deployment.yaml
</span></span></code></pre></div><h3 id=-deploy-plausible>📈 Deploy Plausible<a hidden class=anchor aria-hidden=true href=#-deploy-plausible>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>ghcr.io/plausible/community-edition:v2.1.4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>envFrom</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>secretRef</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>plausible-config</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f plausible-deployment.yaml
</span></span></code></pre></div><p>🎉 <strong>Done!</strong> Your Plausible Analytics instance is now live on Civo Kubernetes! 🚀</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://keithhubner.github.io/keithhubner.com/tags/civo/>Civo</a></li><li><a href=https://keithhubner.github.io/keithhubner.com/tags/kubernetes/>Kubernetes</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://keithhubner.github.io/keithhubner.com/>Keith Hubner</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><p>Get in touch:</p><ul><li><a href=mailto:yourname@example.com>Email</a></li><li><a href=https://linkedin.com/in/yourprofile>LinkedIn</a></li><li><a href=https://github.com/yourusername>GitHub</a></li></ul></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>